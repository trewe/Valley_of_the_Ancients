#textdomain wesnoth-Valley_of_the_Ancients

[multiplayer]
    id=temples_of_the_nagas
    name= _ "4p â€” Temples of the nagas"
    description= _ "Lured by the promise of untold treasures, 4 nations unite in an uneasy alliance to lay siege to the temples of the nagas.

This is a 4-player team multiplayer scenario that includes several waves of enemy spawns controled by the AI. Each spawn will have a ""Boss"" unit that will drop a helpful item when slain. Each temple contains gold that may be plundered once.

Victory is achieved by killing every unit on the map after the final spawn.

Recommended settings:
    80% XP, 2 GPV"
    map_data="{~add-ons/Valley_of_the_Ancients/maps/Temples_Of_The_Nagas.map}"
    victory_when_enemies_defeated=no
    experience_modifier=80
    turns=-1

    [story]
        [part]
            story= _ "Lured by the promise of untold treasures, four nations unite in an uneasy alliance to lay siege to the temples of the nagas."
        [/part]
        [part]
            story= _ "The crafty Naga Templars, however, were well aware of the encroaching attackers. They used some gold to hire mercenaries, hoarding the rest within the temples. Their champions were summoned, along with scores of men and monstars, all ready to defend the sacred temples with their lives."
            #background="portraits/nagas/fighter.webp"
            #scale_background=no
        [/part]
        [part]
            story= _ "Unbeknownst to them all, the High Templar plans to use the blood of the fallen, both friend and foe, to summon their god into this mortal realm. Only blood sacrifice is powerful enough to summon a god, and the rivers shall soon run red..."
            #background="portraits/nagas/myrmidon.webp"
            #scale_background=no
        [/part]
    [/story]

    {DEFAULT_SCHEDULE}
    {FULL_MUSIC_PLAYLIST_NO_EVENT}

    [side]
        side=1
        controller=ai
        allow_player=no
        team_name=Temple Guardians
        user_team_name= _ "team_name^Temple Guardians"
        no_leader=yes
        fog=no
        gold,income=0,-2
        defeat_condition=never
        [ai]
            aggression=0.2
            caution=0.3
            simple_targeting=yes
            grouping=no
        [/ai]
    [/side]

    [side]
        side=2
        controller=human
        team_name=Attackers
        user_team_name= _ "team_name^Attackers"
        canrecruit=yes
        gold=75
        income=1
        fog=no
        facing=ne
        [ai]
            villages_per_scout=12
            village_value=5.0
            aggression=0.3
            caution=0.9
        [/ai]
        [village]
            x,y=2,31
        [/village]
    [/side]

    [side]
        side=3
        controller=human
        team_name=Attackers
        user_team_name= _ "team_name^Attackers"
        canrecruit=yes
        gold=75
        income=1
        fog=no
        facing=sw
        [ai]
            villages_per_scout=12
            village_value=5.0
            aggression=0.3
            caution=0.9
        [/ai]
        [village]
            x,y=30,1
        [/village]
    [/side]

    [side]
        side=4
        controller=human
        team_name=Attackers
        user_team_name= _ "team_name^Attackers"
        canrecruit=yes
        gold=75
        income=1
        fog=no
        facing=se
        [ai]
            villages_per_scout=12
            village_value=5.0
            aggression=0.3
            caution=0.9
        [/ai]
        [village]
            x,y=2,1
        [/village]
    [/side]

    [side]
        side=5
        controller=human
        team_name=Attackers
        user_team_name= _ "team_name^Attackers"
        canrecruit=yes
        gold=75
        income=1
        fog=no
        facing=nw
        [ai]
            villages_per_scout=12
            village_value=5.0
            aggression=0.3
            caution=0.9
        [/ai]
        [village]
            x,y=30,31
        [/village]
    [/side]

    # temples
    {PLACE_IMAGE scenery/temple1.png 16 16}
    {PLACE_IMAGE scenery/temple1.png 16 11}
    {PLACE_IMAGE scenery/temple1.png 6 16}
    {PLACE_IMAGE scenery/temple1.png 26 16}
    {PLACE_IMAGE scenery/temple1.png 16 21}

    # chests
    {PLACE_IMAGE items/chest-plain-closed.png 9 8}
    {PLACE_IMAGE items/chest-plain-closed.png 23 8}
    {PLACE_IMAGE items/chest-plain-closed.png 9 25}
    {PLACE_IMAGE items/chest-plain-closed.png 23 25}

#define _SET_LABEL TEXT X Y
    [label]
        x,y={X},{Y}
        text="<span color='white'>"+{TEXT}+"</span>" #wmllint: ignore
    [/label]
#enddef

    # length choice
    [options]
        [choice]
            id=Temples_Of_The_Nagas_Settings
            default=medium
            name= _ "Difficulty"
            description= _ "Choose the length and difficulty of the scenario"
            [item]
                name= _ "Lite: 4 waves, 22 turn limit"
                value=lite
            [/item]
            [item]
                name= _ "Medium: 6 waves, 34 turn limit"
                value=medium
            [/item]
            [item]
                name= "Epic: 8 waves, 46 turn limit"
                value=epic
            [/item]
            [item]
                name= _ "Hardcore: 10 waves, 58 turn limit"
                value=hardcore
            [/item]
        [/choice]
    [/options]

    [event]
        name=prestart

        [switch]
            variable=Temples_Of_The_Nagas_Settings
            [case]
                value=lite
                [modify_turns]
                    value=22
                [/modify_turns]
                {VARIABLE last_spawn 18}
            [/case]
            [case]
                value=epic
                [modify_turns]
                    value=46
                [/modify_turns]
                {VARIABLE last_spawn 38}
            [/case]
            [case]
                value=hardcore
                [modify_turns]
                    value=58
                [/modify_turns]
                {VARIABLE last_spawn 48}
            [/case]
            [else] # medium and default
                [modify_turns]
                    value=34
                [/modify_turns]
                {VARIABLE last_spawn 28}
            [/else]
        [/switch]

        {_SET_LABEL (_"The oracle of Xnamas") 16 16}
        {_SET_LABEL (_"Temple of Liabra") 16 11}
        {_SET_LABEL (_"Temple of Wizzi") 6 16}
        {_SET_LABEL (_"Temple of Axmaill") 26 16}
        {_SET_LABEL (_"Temple of Saxrireii") 16 21}

        {MODIFY_AI_DELETE_CANDIDATE_ACTION 1 main_loop villages}

        [objectives]
            side=0
            [objective]
                description= _ "Kill off all the waves of enemies"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of all party leaders"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                show_turn_counter=yes
                condition=lose
            [/objective]
        [/objectives]
    [/event]

#ifdef __UNUSED__
    # story
    [event]
        name=turn 1
        [message]
            speaker=narrator
            image=scenery/temple1.png
            message=_  "This is a 4-player team multiplayer scenario which includes several waves of enemy spawns controled by the AI. Each spawn will have a ""Boss"" unit who will drop a useful item when slain. Victory is achieved by killing every unit on the map after the final wave. Each temple contains gold that may be plundered. Each temple may only be plundered once."
        [/message]
        [message]
            speaker=narrator
            message=_ "Created by:
jb: Map and story
Mythological: WML"
            image="misc/logo.png"
        [/message]
        [message]
            speaker=narrator
            message=_ "Special thanks to Truper for testing the scenario and providing feedback.

Maintenance and updates:
2012: Evropi in versions 1.25-1.26 with several improvements for Wesnoth 1.10.
2017: cengique/enzuppe updated version 1.26.2 onwards to work in Wesnoth 1.12."
            image="icons/icon-addon-publish.png"
        [/message]
    [/event]
#endif

    [event]
        name=side turn
        [message]
            side=4
            message=_ "Let us get one thing straight: I do not trust you and you do not trust me. If you get in my way, I may be indiscriminate about who is friend and who is foe."
        [/message]

        [message]
            side=5
            message=_ "Fine with me. I am not here to aid you, I am here for the gold."
        [/message]

        [message]
            side=2
            message=_ "No need for your petty hatred. We must work together if we have any hope of defeating the temple guardians."
        [/message]

        [message]
            side=3
            message=_ "Silence! The battle is upon us. Prepare to attack."
        [/message]
    [/event]

    [event]
        name=last breath
        #first_time_only=no
        [filter]
            canrecruit=yes
            side=2,3,4,5
        [/filter]
        [message]
            speaker=unit
            message=_ "Knee deep in mud and blood, a lucky blow ends your life. Damn Wesnoth and its unfair RNG. Clearly, if you did not have such bad luck, victory would have been yours..."
        [/message]
        [message]
            canrecruit=yes
            [not]
                side=$side_number
                [or]
                    side=1
                [/or]
            [/not]
            message=_ "Good, more gold for us!"
        [/message]
    [/event]

    # bonuses
    [event]
        name=moveto
        [filter]
            x,y=16,16
            side=2,3,4,5
        [/filter]
        [gold]
            amount=100
            side=$side_number
        [/gold]
        [sound]
            name=gold.ogg
        [/sound]
        [print]
            text=_ "Xnamas plundered"
            size=24
            red,green,blue=0,255,0
        [/print]
        [remove_item]
            x=16
            y=16
        [/remove_item]

        {PLACE_IMAGE scenery/village-human-burned1.png 16 16}
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=16,11
            side=2,3,4,5
        [/filter]
        [gold]
            amount=50
            side=$side_number
        [/gold]
        [sound]
            name=gold.ogg
        [/sound]
        [print]
            text=_ "Liabra plundered"
            size=24
            red,green,blue=0,255,0
        [/print]
        [remove_item]
            x=16
            y=11
        [/remove_item]

        {PLACE_IMAGE scenery/village-human-burned1.png 16 11}
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=16,21
            side=2,3,4,5
        [/filter]
        [gold]
            amount=50
            side=$side_number
        [/gold]
        [sound]
            name=gold.ogg
        [/sound]
        [print]
            text=_ "Saxrireii plundered"
            size=24
            red,green,blue=0,255,0
        [/print]
        [remove_item]
            x=16
            y=21
        [/remove_item]

        {PLACE_IMAGE scenery/village-human-burned1.png 16 21}
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=6,16
            side=2,3,4,5
        [/filter]
        [gold]
            amount=50
            side=$side_number
        [/gold]
        [sound]
            name=gold.ogg
        [/sound]
        [print]
            text=_ "Wizzi plundered"
            size=24
            red,green,blue=0,255,0
        [/print]
        [remove_item]
            x=6
            y=16
        [/remove_item]

        {PLACE_IMAGE scenery/village-human-burned1.png 6 16}
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=26,16
            side=2,3,4,5
        [/filter]
        [gold]
            amount=50
            side=$side_number
        [/gold]
        [sound]
            name=gold.ogg
        [/sound]
        [print]
            text=_ "Axmaill plundered"
            size=24
            red,green,blue=0,255,0
        [/print]
        [remove_item]
            x=26
            y=16
        [/remove_item]

        {PLACE_IMAGE scenery/village-human-burned1.png 26 16}
    [/event]

    # spawns
#define _SPAWN_GUARDIAN TYPE X Y
    [unit]
        side=1
        type={TYPE}
        x,y={X},{Y}
        generate_name=yes
        random_traits=no
    [/unit]
#enddef

#define _SPAWN_DEFENDER TYPE X Y
    # move any unit on temple away
    [if]
        [have_unit]
            x,y={X},{Y}
        [/have_unit]
        [then]
            [teleport]
                [filter]
                    x,y={X},{Y}
                [/filter]
                x,y={X},"$({Y}+1)"
            [/teleport]
        [/then]
    [/if]

    # let previous guardians move if still alive
    [remove_object]
        object_id=unmoveable{X}{Y}
        side=1
    [/remove_object]

    [unit]
        side=1
        type={TYPE}
        x,y={X},{Y}
        generate_name=yes
        random_traits=no
        ai_special=guardian
        [modifications]
            [object]
                id=unmoveable{X}{Y}
                silent=yes
                [effect]
                    apply_to=movement
                    increase=-100%
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        swamp_water=2
                        flat=2
                        shallow_water=2
                        castle=2
                        sand=2
                        hills=2
                        forest=2
                        village=2
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#define _SPAWN_NAGA_GUARDIAN TYPE X Y
    [unit]
        side=1
        type={TYPE}
        x,y={X},{Y}
        generate_name=yes
        random_traits=no
        [modifications]
            [object]
                silent=yes
                [effect]
                    apply_to=resistance
                    replace=yes
                    [resistance]
                        cold=80
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

    # the hintbook text
    [event]
        name=turn 2

        [set_menu_item]
            id=hintbook_text
            description= _ "Show Spawns"
            synced=no
            [filter_location]
                x,y=9,8
                [or]
                    x,y=23,8
                [/or]
                [or]
                    x,y=9,25
                [/or]
                [or]
                    x,y=23,25
                [/or]
            [/filter_location]
            [command]
                [switch]
                    variable=Temples_Of_The_Nagas_Settings
                    [case]
                        value=lite
                        [message]
                            speaker=narrator
                            image="portraits/nagas/fighter.webp"
                            message= _ "Turn 3: Critters and crawlers and simple folk...
Turn 8: Backstabbing, elusive, poisonous knaves...
Turn 13: Fire, thunder, and arrows everywhere...
Turn 18: Birds above and scouts below..."
                        [/message]
                    [/case]
                    [case]
                        value=epic
                        [message]
                            speaker=narrator
                            image="portraits/nagas/fighter.webp"
                            message= _ "Turn 3: Critters and crawlers and simple folk...
Turn 8: Backstabbing, elusive, poisonous knaves...
Turn 13: Fire, thunder, and arrows everywhere...
Turn 18: Birds above and scouts below...
Turn 23: Men of steel and men of might...
Turn 28: A rift of magic...
Turn 33: The raging sea comes for its revenge...
Turn 38: Stronger men of steel and men of might..."
                        [/message]
                    [/case]
                    [case]
                        value=hardcore
                        [message]
                            speaker=narrator
                            image="portraits/nagas/fighter.webp"
                            message= _ "Turn 3: Critters and crawlers and simple folk...
Turn 8: Backstabbing, elusive, poisonous knaves...
Turn 13: Fire, thunder, and arrows everywhere...
Turn 18: Birds above and scouts below...
Turn 23: Men of steel and men of might...
Turn 28: A rift of magic...
Turn 33: The raging sea comes for its revenge...
Turn 38: Stronger men of steel and men of might...
Turn 43: Death for mortals and monsters alike...
Turn 48: The naga defenders themselves..."
                        [/message]
                    [/case]
                    [else] # medium and default
                        [message]
                            speaker=narrator
                            image="portraits/nagas/fighter.webp"
                            message= _ "Turn 3: Critters and crawlers and simple folk...
Turn 8: Backstabbing, elusive, poisonous knaves...
Turn 13: Fire, thunder, and arrows everywhere...
Turn 18: Birds above and scouts below...
Turn 23: Men of steel and men of might...
Turn 28: A rift of magic..."
                        [/message]
                    [/else]
                [/switch]
            [/command]
        [/set_menu_item]

        # chronology
        [sound]
            name=open-chest.wav
        [/sound]

        [message]
            speaker=narrator
            image=items/chest-plain-open.png
            message=_ "In a small dirty chest tossed haphazardly to the side of the path, your scouts find the journal from the last king who was foolish enough to challenge the naga temples."
        [/message]

        [remove_item]
            x,y=9,8
        [/remove_item]
        [remove_item]
            x,y=23,8
        [/remove_item]
        [remove_item]
            x,y=9,25
        [/remove_item]
        [remove_item]
            x,y=23,25
        [/remove_item]

        {PLACE_IMAGE items/book1.png 9 8}
        {PLACE_IMAGE items/book2.png 23 8}
        {PLACE_IMAGE items/book3.png 9 25}
        {PLACE_IMAGE items/book4.png 23 25}
    [/event]

#define _QUAKE
    [sound]
        name=lightning.ogg
    [/sound]
    [scroll_to]
        x=16
        y=16
    [/scroll_to]
    [scroll]
        x=5
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=-10
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=5
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=-10
    [/scroll]
    [scroll]
        x=5
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=-10
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=5
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=-10
    [/scroll]
    [scroll]
        x=5
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=-10
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=5
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=-10
    [/scroll]
    [scroll]
        x=5
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=-10
        y=0
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=5
    [/scroll]
    [delay]
        time=10
    [/delay]
    [scroll]
        x=0
        y=-10
    [/scroll]
    [color_adjust]
        red,green,blue=128,0,0
    [/color_adjust]
    [sound]
        name=rumble.ogg
    [/sound]
#enddef

#define _HERO
    [unit_overlay]
        x,y=$|x1,$|y1
        image="misc/hero-icon.png"
    [/unit_overlay]
    [remove_item]
        x,y=$|x1,$|y1
    [/remove_item]
    [label]
        x,y=$|x1,$|y1
        text="" #wmllint: ignore
    [/label]
#enddef

    [event]
        name=turn 3

        {_QUAKE}

        {_SPAWN_DEFENDER "Giant Mudcrawler" 16 21 }
        {_SPAWN_DEFENDER "Bowman" 16 11 }
        {_SPAWN_DEFENDER "Soulless" 6 16 }
        {_SPAWN_DEFENDER "Goblin Rouser" 26 16 }
        {_SPAWN_DEFENDER "Blood Bat" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type="Goblin Pillager"
            name=_"Argurk"
            {IS_HERO}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_QUICK}
                [object]
                    silent=yes
                    [effect]
                        apply_to=movement
                        increase=100%
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Mudcrawler" 16 11}
        {_SPAWN_GUARDIAN "Peasant" 16 11}
        {_SPAWN_GUARDIAN "Goblin Spearman" 16 11}
        {_SPAWN_GUARDIAN "Walking Corpse" 16 11}
        {_SPAWN_GUARDIAN "Mudcrawler" 6 16}
        {_SPAWN_GUARDIAN "Peasant" 6 16}
        {_SPAWN_GUARDIAN "Goblin Spearman" 6 16}
        {_SPAWN_GUARDIAN "Walking Corpse" 6 16}
        {_SPAWN_GUARDIAN "Mudcrawler" 26 16}
        {_SPAWN_GUARDIAN "Peasant" 26 16}
        {_SPAWN_GUARDIAN "Goblin Spearman" 26 16}
        {_SPAWN_GUARDIAN "Walking Corpse" 26 16}
        {_SPAWN_GUARDIAN "Mudcrawler" 16 21}
        {_SPAWN_GUARDIAN "Peasant" 16 21}
        {_SPAWN_GUARDIAN "Goblin Spearman" 16 21}
        {_SPAWN_GUARDIAN "Walking Corpse" 16 21}
        {_SPAWN_GUARDIAN "Vampire Bat" 16 16}
        {_SPAWN_GUARDIAN "Vampire Bat" 16 16}
        {_SPAWN_GUARDIAN "Vampire Bat" 16 16}
        {_SPAWN_GUARDIAN "Vampire Bat" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "You can't run from me!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "Aarrrggggghhhhh!"
            [/message]
            [message]
                speaker=narrator
                image=items/ring-brown.png
                message=_ "Argurk drops an item: The Choker of Speed.

Wearing this choker will double your speed."
            [/message]

            {PLACE_IMAGE items/ring-brown.png $|x1 $|y1}
            {_SET_LABEL (_"The choker of speed") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Choker
                    name= _ "Choker of Speed"
                    image=items/ring-brown.png
                    description= _ "Wearing this choker will double your speed."
                    [filter]
                        x,y=$|x1,$|y1
                    [/filter]
                    [effect]
                        apply_to=movement
                        increase=100%
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 8

        {_QUAKE}

        {_SPAWN_DEFENDER "Fencer" 16 21 }
        {_SPAWN_DEFENDER "Orcish Assassin" 16 11 }
        {_SPAWN_DEFENDER "Thief" 6 16 }
        {_SPAWN_DEFENDER "Saurian Skirmisher" 26 16 }
        {_SPAWN_DEFENDER "Outlaw" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type="Dwarvish Berserker"
            name=_ "Elmagatsol"
            {IS_HERO}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=new_attack
                        name=berserker frenzy
                        icon=attacks/frenzy.png
                        type=blade
                        [specials]
                            {WEAPON_SPECIAL_BERSERK}
                        [/specials]
                        range=noretaliation
                        damage=50
                        number=1
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=berserker frenzy
                            [/filter_attack]
                            hits=no
                            [frame]
                                begin=-250
                                end=-150
                                image="units/dwarves/berserker/berserker.png"
                            [/frame]
                            [frame]
                                begin=-150
                                end=-50
                                image="units/dwarves/berserker/berserker-attack-1.png"
                            [/frame]
                            [frame]
                                begin=-50
                                end=50
                                image="units/dwarves/berserker/berserker-attack-2.png"
                                sound={SOUND_LIST:MISS}
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-3.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-4.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-5.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-6.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-7.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-8.png"
                            [/frame]
                        [/attack_anim]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=berserker frenzy
                            [/filter_attack]
                            hits=yes
                            [frame]
                                begin=-250
                                end=-150
                                image="units/dwarves/berserker/berserker.png"
                            [/frame]
                            [frame]
                                begin=-150
                                end=-50
                                image="units/dwarves/berserker/berserker-attack-1.png"
                            [/frame]
                            [frame]
                                begin=-50
                                end=50
                                image="units/dwarves/berserker/berserker-attack-2.png"
                                sound=axe.ogg
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-3.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-4.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-5.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-6.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-7.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-8.png"
                            [/frame]
                        [/attack_anim]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Saurian Skirmisher" 16 11}
        {_SPAWN_GUARDIAN "Fencer" 16 11}
        {_SPAWN_GUARDIAN "Thief" 16 11}
        {_SPAWN_GUARDIAN "Orcish Assassin" 16 11}
        {_SPAWN_GUARDIAN "Saurian Skirmisher" 6 16}
        {_SPAWN_GUARDIAN "Fencer" 6 16}
        {_SPAWN_GUARDIAN "Thief" 6 16}
        {_SPAWN_GUARDIAN "Orcish Assassin" 6 16}
        {_SPAWN_GUARDIAN "Saurian Skirmisher" 26 16}
        {_SPAWN_GUARDIAN "Fencer" 26 16}
        {_SPAWN_GUARDIAN "Thief" 26 16}
        {_SPAWN_GUARDIAN "Orcish Assassin" 26 16}
        {_SPAWN_GUARDIAN "Saurian Skirmisher" 16 21}
        {_SPAWN_GUARDIAN "Fencer" 16 21}
        {_SPAWN_GUARDIAN "Thief" 16 21}
        {_SPAWN_GUARDIAN "Orcish Assassin" 16 21}
        {_SPAWN_GUARDIAN "Footpad" 16 16}
        {_SPAWN_GUARDIAN "Footpad" 16 16}
        {_SPAWN_GUARDIAN "Footpad" 16 16}
        {_SPAWN_GUARDIAN "Footpad" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "I'll chop you all to pieces.....MUHAHAHAHA!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "Nooooo... It's not possible that someone could defeat me."
            [/message]
            [message]
                speaker=narrator
                image=items/ankh-necklace.png
                message=_ "Elmagatsol drops an item: Berserker Amulet.

Wearing this amulet when attacking will transform you into a wild berserker against whom no enemy has a chance to retaliate."
            [/message]

            {PLACE_IMAGE items/ankh-necklace.png $|x1 $|y1}
            {_SET_LABEL ("Berserker amulet") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Amulet
                    name= _ "Berserker Amulet"
                    image=items/ankh-necklace.png
                    description= _ "Wearing this amulet when attacking will transform you into a wild berserker against whom no enemy has a chance to retaliate."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=new_attack
                        name=berserker frenzy
                        icon=attacks/frenzy.png
                        type=blade
                        [specials]
                            {WEAPON_SPECIAL_BERSERK}
                        [/specials]
                        range=noretaliation
                        damage=50
                        number=1
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=berserker frenzy
                            [/filter_attack]
                            hits=no
                            [frame]
                                begin=-250
                                end=-150
                                image="units/dwarves/berserker/berserker.png"
                            [/frame]
                            [frame]
                                begin=-150
                                end=-50
                                image="units/dwarves/berserker/berserker-attack-1.png"
                            [/frame]
                            [frame]
                                begin=-50
                                end=50
                                image="units/dwarves/berserker/berserker-attack-2.png"
                                sound={SOUND_LIST:MISS}
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-3.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-4.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-5.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-6.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-7.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-8.png"
                            [/frame]
                        [/attack_anim]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        [attack_anim]
                            [filter_attack]
                                name=berserker frenzy
                            [/filter_attack]
                            hits=yes
                            [frame]
                                begin=-250
                                end=-150
                                image="units/dwarves/berserker/berserker.png"
                            [/frame]
                            [frame]
                                begin=-150
                                end=-50
                                image="units/dwarves/berserker/berserker-attack-1.png"
                            [/frame]
                            [frame]
                                begin=-50
                                end=50
                                image="units/dwarves/berserker/berserker-attack-2.png"
                                sound=axe.ogg
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-3.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-4.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-5.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-6.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-7.png"
                            [/frame]
                            [frame]
                                begin=50
                                end=150
                                image="units/dwarves/berserker/berserker-attack-8.png"
                            [/frame]
                        [/attack_anim]
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 13

        {_QUAKE}

        {_SPAWN_DEFENDER "Orcish Crossbowman" 16 21 }
        {_SPAWN_DEFENDER "Longbowman" 16 11 }
        {_SPAWN_DEFENDER "Bone Shooter" 6 16 }
        {_SPAWN_DEFENDER "Fire Drake" 26 16 }
        {_SPAWN_DEFENDER "Dwarvish Thunderguard" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type="Elvish Sharpshooter"
            name= _ "Tora"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_DEXTROUS}
                [object]
                    silent=yes
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_attacks=3
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Skeleton Archer" 16 11}
        {_SPAWN_GUARDIAN "Orcish Archer" 16 11}
        {_SPAWN_GUARDIAN "Elvish Archer" 16 11}
        {_SPAWN_GUARDIAN "Bowman" 16 11}
        {_SPAWN_GUARDIAN "Dwarvish Thunderer" 16 11}
        {_SPAWN_GUARDIAN "Drake Burner" 16 11}
        {_SPAWN_GUARDIAN "Skeleton Archer" 6 16}
        {_SPAWN_GUARDIAN "Orcish Archer" 6 16}
        {_SPAWN_GUARDIAN "Elvish Archer" 6 16}
        {_SPAWN_GUARDIAN "Bowman" 6 16}
        {_SPAWN_GUARDIAN "Dwarvish Thunderer" 6 16}
        {_SPAWN_GUARDIAN "Drake Burner" 6 16}
        {_SPAWN_GUARDIAN "Skeleton Archer" 26 16}
        {_SPAWN_GUARDIAN "Orcish Archer" 26 16}
        {_SPAWN_GUARDIAN "Elvish Archer" 26 16}
        {_SPAWN_GUARDIAN "Bowman" 26 16}
        {_SPAWN_GUARDIAN "Dwarvish Thunderer" 26 16}
        {_SPAWN_GUARDIAN "Drake Burner" 26 16}
        {_SPAWN_GUARDIAN "Skeleton Archer" 16 21}
        {_SPAWN_GUARDIAN "Orcish Archer" 16 21}
        {_SPAWN_GUARDIAN "Elvish Archer" 16 21}
        {_SPAWN_GUARDIAN "Bowman" 16 21}
        {_SPAWN_GUARDIAN "Dwarvish Thunderer" 16 21}
        {_SPAWN_GUARDIAN "Drake Burner" 16 21}
        {_SPAWN_GUARDIAN "Trapper" 16 16}
        {_SPAWN_GUARDIAN "Trapper" 16 16}
        {_SPAWN_GUARDIAN "Trapper" 16 16}
        {_SPAWN_GUARDIAN "Trapper" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "I will shoot you down!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "......"
            [/message]
            [message]
                speaker=narrator
                image=items/bow-elven.png
                message=_ "Tora drops an item: Elven Bow.

The Elven Bow greatly increases your existing ranged attack or, if you don't have any ranged attack, gives you a powerful new one."
            [/message]

            {PLACE_IMAGE items/bow-elven.png $|x1 $|y1}
            {_SET_LABEL ("Elven Bow") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [if]
                    [have_unit]
                        x,y=$|x1,$|y1
                        [has_attack]
                            range=ranged
                        [/has_attack]
                    [/have_unit]
                    [then]
                        [object]
                            id=Bow
                            name= _ "Elven Bow"
                            image=attacks/bow-elven-magic.png
                            description= _ "The elven bow greatly increases your ranged attack."
                            [filter]
                                x,y=$|x1,$|y1
                                side=2,3,4,5
                            [/filter]
                            [effect]
                                apply_to=attack
                                range=ranged
                                increase_damage=5
                                increase_attacks=2
                                [set_specials]
                                    {WEAPON_SPECIAL_MARKSMAN}
                                    mode=append
                                [/set_specials]
                            [/effect]
                        [/object]
                    [/then]
                    [else]
                        [object]
                            id=BowII
                            name= _ "Elven Bow"
                            image=attacks/bow-elven-magic.png
                            description= _ "The elven bow gives you a powerful ranged attack."
                            [filter]
                                x,y=$|x1,$|y1
                                side=2,3,4,5
                            [/filter]
                            [effect]
                                apply_to=new_attack
                                name=elven bow
                                icon=attacks/bow-elven-magic.png
                                type=pierce
                                [specials]
                                    {WEAPON_SPECIAL_MARKSMAN}
                                [/specials]
                                range=ranged
                                damage=10
                                number=5
                            [/effect]
                        [/object]
                    [/else]
                [/if]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 18

        {_QUAKE}

        {_SPAWN_DEFENDER "Dragoon" 16 21 }
        {_SPAWN_DEFENDER "Goblin Knight" 16 11 }
        {_SPAWN_DEFENDER "Gryphon Master" 6 16 }
        {_SPAWN_DEFENDER "Elvish Rider" 26 16 }
        {_SPAWN_DEFENDER "Sky Drake" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type="Merman Hoplite"
            name= _ "Poseidon"
            {IS_HERO}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            blade=40
                            impact=40
                            pierce=50
                            fire=30
                            arcane=30
                            cold=40
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Elvish Scout" 16 11}
        {_SPAWN_GUARDIAN "Wolf Rider" 16 11}
        {_SPAWN_GUARDIAN "Gryphon Rider" 16 11}
        {_SPAWN_GUARDIAN "Cavalryman" 16 11}
        {_SPAWN_GUARDIAN "Drake Glider" 16 11}
        {_SPAWN_GUARDIAN "Blood Bat" 16 11}
        {_SPAWN_GUARDIAN "Elvish Scout" 6 16}
        {_SPAWN_GUARDIAN "Wolf Rider" 6 16}
        {_SPAWN_GUARDIAN "Gryphon Rider" 6 16}
        {_SPAWN_GUARDIAN "Cavalryman" 6 16}
        {_SPAWN_GUARDIAN "Drake Glider" 6 16}
        {_SPAWN_GUARDIAN "Blood Bat" 6 16}
        {_SPAWN_GUARDIAN "Elvish Scout" 26 16}
        {_SPAWN_GUARDIAN "Wolf Rider" 26 16}
        {_SPAWN_GUARDIAN "Gryphon Rider" 26 16}
        {_SPAWN_GUARDIAN "Cavalryman" 26 16}
        {_SPAWN_GUARDIAN "Drake Glider" 26 16}
        {_SPAWN_GUARDIAN "Blood Bat" 26 16}
        {_SPAWN_GUARDIAN "Elvish Scout" 16 21}
        {_SPAWN_GUARDIAN "Wolf Rider" 16 21}
        {_SPAWN_GUARDIAN "Gryphon Rider" 16 21}
        {_SPAWN_GUARDIAN "Cavalryman" 16 21}
        {_SPAWN_GUARDIAN "Drake Glider" 16 21}
        {_SPAWN_GUARDIAN "Blood Bat" 16 21}
        {_SPAWN_GUARDIAN "Elvish Rider" 16 16}
        {_SPAWN_GUARDIAN "Gryphon Master" 16 16}
        {_SPAWN_GUARDIAN "Goblin Pillager" 16 16}
        {_SPAWN_GUARDIAN "Goblin Knight" 16 16}
        {_SPAWN_GUARDIAN "Dragoon" 16 16}
        {_SPAWN_GUARDIAN "Sky Drake" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "You deserve a trident through the heart!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "Glu glu..."
            [/message]
            [message]
                speaker=narrator
                image=scenery/slab1.png
                message=_ "Poseidon drops an item: Hoplite's Shield.

Hoplite's Shield will increase your resistances to all kinds of weapons, effectively reducing the damage you take by half."
            [/message]

            {PLACE_IMAGE scenery/slab1.png $|x1 $|y1}
            {_SET_LABEL ("Hoplite's Shield") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Shield
                    name= _ "Hoplite's Shield"
                    image=scenery/slab1.png
                    description= _ "The Hoplite's Shield will increase your resistances to all kinds of weapons, effectively reducing the damage you take by half."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            blade=40
                            impact=40
                            pierce=50
                            fire=30
                            arcane=30
                            cold=40
                        [/resistance]
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_STEADFAST}
                        [/abilities]
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 23

        [filter_condition]
            {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals medium}
            [or]
                {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals epic}
            [/or]
            [or]
                {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals hardcore}
            [/or]
        [/filter_condition]

        {_QUAKE}

        {_SPAWN_DEFENDER "Javelineer" 16 21 }
        {_SPAWN_DEFENDER "Drake Warrior" 16 11 }
        {_SPAWN_DEFENDER "Orcish Warrior" 6 16 }
        {_SPAWN_DEFENDER "Revenant" 26 16 }
        {_SPAWN_DEFENDER "Elvish Champion" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type="Dwarvish Lord"
            name= _ "Mithril"
            {IS_HERO}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=100%
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_LEADERSHIP}
                        [/abilities]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Elvish Hero" 16 11}
        {_SPAWN_GUARDIAN "Orcish Grunt" 16 11}
        {_SPAWN_GUARDIAN "Dwarvish Fighter" 16 11}
        {_SPAWN_GUARDIAN "Swordsman" 16 11}
        {_SPAWN_GUARDIAN "Drake Fighter" 16 11}
        {_SPAWN_GUARDIAN "Skeleton" 16 11}
        {_SPAWN_GUARDIAN "Elvish Fighter" 6 16}
        {_SPAWN_GUARDIAN "Orcish Warrior" 6 16}
        {_SPAWN_GUARDIAN "Dwarvish Fighter" 6 16}
        {_SPAWN_GUARDIAN "Spearman" 6 16}
        {_SPAWN_GUARDIAN "Drake Warrior" 6 16}
        {_SPAWN_GUARDIAN "Skeleton" 6 16}
        {_SPAWN_GUARDIAN "Elvish Fighter" 26 16}
        {_SPAWN_GUARDIAN "Orcish Grunt" 26 16}
        {_SPAWN_GUARDIAN "Dwarvish Steelclad" 26 16}
        {_SPAWN_GUARDIAN "Spearman" 26 16}
        {_SPAWN_GUARDIAN "Drake Fighter" 26 16}
        {_SPAWN_GUARDIAN "Deathblade" 26 16}
        {_SPAWN_GUARDIAN "Elvish Fighter" 16 21}
        {_SPAWN_GUARDIAN "Orcish Grunt" 16 21}
        {_SPAWN_GUARDIAN "Dwarvish Fighter" 16 21}
        {_SPAWN_GUARDIAN "Pikeman" 16 21}
        {_SPAWN_GUARDIAN "Drake Fighter" 16 21}
        {_SPAWN_GUARDIAN "Revenant" 16 21}
        {_SPAWN_GUARDIAN "Javelineer" 16 16}
        {_SPAWN_GUARDIAN "Orcish Warrior" 16 16}
        {_SPAWN_GUARDIAN "Drake Warrior" 16 16}
        {_SPAWN_GUARDIAN "Elvish Hero" 16 16}
        {_SPAWN_GUARDIAN "Deathblade" 16 16}
        {_SPAWN_GUARDIAN "Dwarvish Steelclad" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "As lord, I shall personally pass judgment. Guilty!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "Slain by an unworthy foe.... ARGH!"
            [/message]
            [message]
                speaker=narrator
                image=items/ring-gold.png
                message=_ "Mithril drops an item: Lord's Ring.

The magical dwarven ring gives you tremendous power, causing your melee strikes to deal double damage. It also gives you the powerful leadership ability."
            [/message]

            {PLACE_IMAGE items/ring-gold.png $|x1 $|y1}
            {_SET_LABEL ("Lord's Ring") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Ring
                    name= _ "Lord's Ring"
                    image=items/ring-gold.png
                    description= _ "The magical dwarven ring gives you tremendous power, causing your melee strikes to deal double damage. It also gives you the powerful leadership ability."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_LEADERSHIP}
                        [/abilities]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        [set_specials]
                            {WEAPON_SPECIAL_CHARGE}
                            mode=append
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=10%
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 28

        [filter_condition]
            {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals medium}
            [or]
                {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals epic}
            [/or]
            [or]
                {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals hardcore}
            [/or]
        [/filter_condition]

        {_SPAWN_DEFENDER "Elvish Shyde" 16 21}
        {_SPAWN_DEFENDER "Lich" 16 11}
        {_SPAWN_DEFENDER "Elvish Enchantress" 6 16}
        {_SPAWN_DEFENDER "Mage of Light" 26 16}
        {_SPAWN_DEFENDER "Necromancer" 16 16}

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type=Silver Mage
            name= _ "Ilon"
            {IS_HERO}
            [modifications]
                {TRAIT_DEXTROUS}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=100%
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Red Mage" 16 11}
        {_SPAWN_GUARDIAN "White Mage" 16 11}
        {_SPAWN_GUARDIAN "Elvish Sorceress" 16 11}
        {_SPAWN_GUARDIAN "Saurian Augur" 16 11}
        {_SPAWN_GUARDIAN "Dark Adept" 16 11}
        {_SPAWN_GUARDIAN "Elvish Druid" 16 11}
        {_SPAWN_GUARDIAN "Mage" 6 16}
        {_SPAWN_GUARDIAN "Dark Sorcerer" 6 16}
        {_SPAWN_GUARDIAN "Saurian Oracle" 6 16}
        {_SPAWN_GUARDIAN "Saurian Soothsayer" 6 16}
        {_SPAWN_GUARDIAN "Elvish Shaman" 6 16}
        {_SPAWN_GUARDIAN "Elvish Sorceress" 6 16}
        {_SPAWN_GUARDIAN "Mage" 26 16}
        {_SPAWN_GUARDIAN "Dark Adept" 26 16}
        {_SPAWN_GUARDIAN "White Mage" 26 16}
        {_SPAWN_GUARDIAN "Saurian Oracle" 26 16}
        {_SPAWN_GUARDIAN "Elvish Sorceress" 26 16}
        {_SPAWN_GUARDIAN "Elvish Druid" 26 16}
        {_SPAWN_GUARDIAN "Red Mage" 16 21}
        {_SPAWN_GUARDIAN "White Mage" 16 21}
        {_SPAWN_GUARDIAN "Elvish Shaman" 16 21}
        {_SPAWN_GUARDIAN "Saurian Augur" 16 21}
        {_SPAWN_GUARDIAN "Dark Sorcerer" 16 21}
        {_SPAWN_GUARDIAN "Saurian Oracle" 16 21}
        {_SPAWN_GUARDIAN "Saurian Soothsayer" 16 16}
        {_SPAWN_GUARDIAN "Saurian Oracle" 16 16}
        {_SPAWN_GUARDIAN "Elvish Sorceress" 16 16}
        {_SPAWN_GUARDIAN "Elvish Druid" 16 16}
        {_SPAWN_GUARDIAN "White Mage" 16 16}
        {_SPAWN_GUARDIAN "Dark Sorcerer" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]
        [message]
            id=ton_boss_$turn_number
            message=_ "Hehehe.. You think you are ready for me!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "It was foolish of me to underestimate you."
            [/message]
            [message]
                speaker=narrator
                image=items/ring-silver.png
                message=_ "Ilon drops an item: Silver Ring.

The Silver Ring gives you powerful magical attacks."
            [/message]

            {PLACE_IMAGE items/ring-silver.png $|x1 $|y1}
            {_SET_LABEL ("Silver Ring") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Silver
                    name= _ "Silver Ring"
                    image=items/ring-silver.png
                    description= _ "The magical silver ring gives you powerful magical attacks."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=new_attack
                        name=arcane aura
                        icon=attacks/fireball.png
                        type=arcane
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                        [/specials]
                        range=melee
                        damage=11
                        number=4
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=fireball
                        icon=attacks/fireball.png
                        type=fire
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                        [/specials]
                        range=ranged
                        damage=21
                        number=4
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 33

        [filter_condition]
            {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals epic}
            [or]
                {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals hardcore}
            [/or]
        [/filter_condition]

        {_SPAWN_DEFENDER "Naga Myrmidon" 16 21 }
        {_SPAWN_DEFENDER "Merman Entangler" 16 11 }
        {_SPAWN_DEFENDER "Merman Javelineer" 6 16 }
        {_SPAWN_DEFENDER "Mermaid Siren" 26 16 }
        {_SPAWN_DEFENDER "Mermaid Diviner" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type=Merman Triton
            name= _ "Neptune"
            {IS_HERO}
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_STRONG}
                [object]
                    silent=yes
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_attacks=3
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_GUARDIAN "Merman Warrior" 16 11}
        {_SPAWN_GUARDIAN "Merman Spearman" 16 11}
        {_SPAWN_GUARDIAN "Merman Netcaster" 16 11}
        {_SPAWN_GUARDIAN "Mermaid Enchantress" 16 11}
        {_SPAWN_GUARDIAN "Mermaid Priestess" 16 11}
        {_SPAWN_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_GUARDIAN "Merman Warrior" 6 16}
        {_SPAWN_GUARDIAN "Merman Spearman" 6 16}
        {_SPAWN_GUARDIAN "Merman Netcaster" 6 16}
        {_SPAWN_GUARDIAN "Mermaid Enchantress" 6 16}
        {_SPAWN_GUARDIAN "Mermaid Priestess" 6 16}
        {_SPAWN_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_GUARDIAN "Merman Warrior" 26 16}
        {_SPAWN_GUARDIAN "Merman Spearman" 26 16}
        {_SPAWN_GUARDIAN "Merman Netcaster" 26 16}
        {_SPAWN_GUARDIAN "Mermaid Enchantress" 26 16}
        {_SPAWN_GUARDIAN "Mermaid Priestess" 26 16}
        {_SPAWN_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_GUARDIAN "Merman Warrior" 16 21}
        {_SPAWN_GUARDIAN "Merman Spearman" 16 21}
        {_SPAWN_GUARDIAN "Merman Netcaster" 16 21}
        {_SPAWN_GUARDIAN "Mermaid Enchantress" 16 21}
        {_SPAWN_GUARDIAN "Mermaid Priestess" 16 21}
        {_SPAWN_GUARDIAN "Naga Myrmidon" 16 16}
        {_SPAWN_GUARDIAN "Merman Triton" 16 16}
        {_SPAWN_GUARDIAN "Merman Javelineer" 16 16}
        {_SPAWN_GUARDIAN "Merman Entangler" 16 16}
        {_SPAWN_GUARDIAN "Mermaid Siren" 16 16}
        {_SPAWN_GUARDIAN "Mermaid Diviner" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "You killed my brother, now I have come for vengeance!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "How can this be? Aaargh!"
            [/message]
            [message]
                speaker=narrator
                image=items/storm-trident.png
                message=_ "Neptune drops an item: Triton's Trident.

Triton's Trident increases your melee attack and enables you to shoot magical ice bolts at your enemies."
            [/message]

            {PLACE_IMAGE items/storm-trident.png $|x1 $|y1}
            {_SET_LABEL ("Triton's Trident") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=TridentS
                    name= _ "Triton's Trident"
                    image=items/storm-trident.png
                    description= _ "Triton's Trident increases your melee attack and enables you to shoot magical ice bolts at your enemies."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_attacks=3
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=ice bolt
                        icon=attacks/lightning.png
                        type=cold
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                        [/specials]
                        range=ranged
                        damage=17
                        number=3
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 38

        [filter_condition]
            {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals epic}
            [or]
                {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals hardcore}
            [/or]
        [/filter_condition]

        {_SPAWN_DEFENDER "Ancient Wose" 16 21 }
        {_SPAWN_DEFENDER "Drake Warden" 16 11 }
        {_SPAWN_DEFENDER "Iron Mauler" 6 16 }
        {_SPAWN_DEFENDER "Troll Warrior" 26 16 }
        {_SPAWN_DEFENDER "Dwarvish Sentinel" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type="Drake Enforcer"
            name= _ "Zogfotpik"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=hitpoints
                        increase_total=100%
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=1
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Drake Thrasher" 16 11}
        {_SPAWN_GUARDIAN "Necrophage" 16 11}
        {_SPAWN_GUARDIAN "Dwarvish Stalwart" 16 11}
        {_SPAWN_GUARDIAN "Troll Rocklobber" 16 11}
        {_SPAWN_GUARDIAN "Shock Trooper" 16 11}
        {_SPAWN_GUARDIAN "Elder Wose" 16 11}
        {_SPAWN_GUARDIAN "Drake Arbiter" 6 16}
        {_SPAWN_GUARDIAN "Necrophage" 6 16}
        {_SPAWN_GUARDIAN "Elder Wose" 6 16}
        {_SPAWN_GUARDIAN "Dwarvish Stalwart" 6 16}
        {_SPAWN_GUARDIAN "Troll" 6 16}
        {_SPAWN_GUARDIAN "Shock Trooper" 6 16}
        {_SPAWN_GUARDIAN "Drake Thrasher" 26 16}
        {_SPAWN_GUARDIAN "Necrophage" 26 16}
        {_SPAWN_GUARDIAN "Dwarvish Stalwart" 26 16}
        {_SPAWN_GUARDIAN "Troll" 26 16}
        {_SPAWN_GUARDIAN "Shock Trooper" 26 16}
        {_SPAWN_GUARDIAN "Elder Wose" 26 16}
        {_SPAWN_GUARDIAN "Drake Arbiter" 16 21}
        {_SPAWN_GUARDIAN "Necrophage" 16 21}
        {_SPAWN_GUARDIAN "Dwarvish Stalwart" 16 21}
        {_SPAWN_GUARDIAN "Troll Rocklobber" 16 21}
        {_SPAWN_GUARDIAN "Shock Trooper" 16 21}
        {_SPAWN_GUARDIAN "Elder Wose" 16 21}
        {_SPAWN_GUARDIAN "Drake Enforcer" 16 16}
        {_SPAWN_GUARDIAN "Drake Warden" 16 16}
        {_SPAWN_GUARDIAN "Ancient Wose" 16 16}
        {_SPAWN_GUARDIAN "Troll Warrior" 16 16}
        {_SPAWN_GUARDIAN "Dwarvish Sentinel" 16 16}
        {_SPAWN_GUARDIAN "Iron Mauler" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "Enough games, I've come to enforce your punishment!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "So be it..."
            [/message]
            [message]
                speaker=narrator
                image=items/armor.png
                message=_ "Zogfotpik drops an item: Enforcer's equipment.

The Enforcer's armor doubles your hitpoints while his weapon gives you a powerful and precise attack."
            [/message]

            {PLACE_IMAGE items/armor.png $|x1 $|y1}
            {_SET_LABEL ("Enforcer's equipment") $|x1 $|y1}

            [event]
                name=moveto
                delayed_variable_substitution=no
                [filter]
                    x,y=$|x1,$|y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Equipment
                    name= _ "Enforcer's equipment"
                    image=items/armor.png
                    description= _ "The Enforcer's armor doubles your hitpoints while his weapon gives you a powerful and precise attack."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=hitpoints
                        increase_total=100%
                        increase=100%
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name="enforcer's blade"
                        icon=attacks/scimitar.png
                        type=blade
                        [specials]
                            {WEAPON_SPECIAL_MARKSMAN}
                        [/specials]
                        range=melee
                        damage=25
                        number=5
                    [/effect]
                [/object]
                {_HERO}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 43

        [filter_condition]
            {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals hardcore}
        [/filter_condition]

        {_SPAWN_DEFENDER "Spectre" 16 21 }
        {_SPAWN_DEFENDER "Sea Serpent" 16 11 }
        {_SPAWN_DEFENDER "Paladin" 6 16 }
        {_SPAWN_DEFENDER "Grand Knight" 26 16 }
        {_SPAWN_DEFENDER "Nightgaunt" 16 16 }

        [unit]
            side=1
            x,y=16,16
            id=ton_boss_$turn_number
            type=Great Mage
            name= _ "Argus"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=300%
                    [/effect]
                    [effect]
                        apply_to=defense
                        replace=yes
                        [defense]
                            deep_water=20
                            shallow_water=20
                            swamp_water=20
                            flat=20
                            sand=20
                            forest=20
                            hills=20
                            mountains=20
                            village=20
                            castle=20
                            cave=20
                            frozen=20
                            unwalkable=20
                            impassable=20
                            fungus=20
                        [/defense]
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=1
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_GUARDIAN "Lancer" 16 11}
        {_SPAWN_GUARDIAN "Dwarvish Berserker" 16 11}
        {_SPAWN_GUARDIAN "Wraith" 16 11}
        {_SPAWN_GUARDIAN "Shadow" 16 11}
        {_SPAWN_GUARDIAN "Giant Spider" 16 11}
        {_SPAWN_GUARDIAN "Cuttle Fish" 16 11}
        {_SPAWN_GUARDIAN "Lancer" 6 16}
        {_SPAWN_GUARDIAN "Dwarvish Berserker" 6 16}
        {_SPAWN_GUARDIAN "Wraith" 6 16}
        {_SPAWN_GUARDIAN "Shadow" 6 16}
        {_SPAWN_GUARDIAN "Giant Spider" 6 16}
        {_SPAWN_GUARDIAN "Cuttle Fish" 6 16}
        {_SPAWN_GUARDIAN "Lancer" 26 16}
        {_SPAWN_GUARDIAN "Dwarvish Berserker" 26 16}
        {_SPAWN_GUARDIAN "Wraith" 26 16}
        {_SPAWN_GUARDIAN "Shadow" 26 16}
        {_SPAWN_GUARDIAN "Giant Spider" 26 16}
        {_SPAWN_GUARDIAN "Cuttle Fish" 26 16}
        {_SPAWN_GUARDIAN "Lancer" 16 21}
        {_SPAWN_GUARDIAN "Dwarvish Berserker" 16 21}
        {_SPAWN_GUARDIAN "Wraith" 16 21}
        {_SPAWN_GUARDIAN "Shadow" 16 21}
        {_SPAWN_GUARDIAN "Giant Spider" 16 21}
        {_SPAWN_GUARDIAN "Cuttle Fish" 16 21}
        {_SPAWN_GUARDIAN "Grand Knight" 16 16}
        {_SPAWN_GUARDIAN "Paladin" 16 16}
        {_SPAWN_GUARDIAN "Spectre" 16 16}
        {_SPAWN_GUARDIAN "Nightgaunt" 16 16}
        {_SPAWN_GUARDIAN "Sea Serpent" 16 16}
        {_SPAWN_GUARDIAN "Giant Spider" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=ton_boss_$turn_number
            message=_ "Who dares challenge me? Foolish mortals, I am a god!"
        [/message]

        [event]
            name=last breath
            delayed_variable_substitution=no
            [filter]
                id=ton_boss_$turn_number
            [/filter]
            [message]
                speaker=unit
                message=_ "Death whispers to me... But it can not have me. I will now ascend a higher plane of existence."
            [/message]
            [message]
                speaker=narrator
                image=items/sceptre-of-fire.png
                message=_ "Argus drops an item: Great Mage's Staff.

This staff gives you a magical attack and a magical defense."
            [/message]

            {PLACE_IMAGE items/sceptre-of-fire.png $|x1 $|y1}
            {_SET_LABEL ("Great Mage's Staff") $|x1 $|y1}

            [event]
                name=moveto
                [filter]
                    x,y=$x1,$y1
                    side=2,3,4,5
                [/filter]
                [object]
                    id=Staff
                    name= _ "Great Mage's Staff"
                    image=items/sceptre-of-fire.png
                    description= _ "This staff gives you a magical attack and a magical defense."
                    [filter]
                        x,y=$|x1,$|y1
                        side=2,3,4,5
                    [/filter]
                    [effect]
                        apply_to=new_attack
                        name=fireball
                        icon=attacks/fireball.png
                        type=fire
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                        [/specials]
                        range=range
                        damage=42
                        number=4
                    [/effect]
                    [effect]
                        apply_to=defense
                        replace=yes
                        [defense]
                            deep_water=20
                            shallow_water=20
                            swamp_water=20
                            flat=20
                            sand=20
                            forest=20
                            hills=20
                            mountains=20
                            village=20
                            castle=20
                            cave=20
                            frozen=20
                            unwalkable=20
                            impassable=20
                            fungus=20
                        [/defense]
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=2
                    [/effect]
                [/object]

                {_HERO}

                {CLEAR_VARIABLE staff_x,staff_y}
            [/event]
        [/event]
    [/event]

    [event]
        name=turn 48

        [filter_condition]
            {VARIABLE_CONDITIONAL Temples_Of_The_Nagas_Settings equals hardcore}
        [/filter_condition]

        [unit]
            side=1
            type=Naga Myrmidon
            x,y=16,16
            id=High Templar
            name= _ "High Templar"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=4
                        attack_weight=0
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=plague gaze
                        icon=attacks/lightning.png
                        type=cold
                        [specials]
                            {WEAPON_SPECIAL_PLAGUE_TYPE Yeti}
                        [/specials]
                        range=ranged
                        damage=10
                        number=3
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        [set_specials]
                            {WEAPON_SPECIAL_PETRIFY}
                            mode=append
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            cold=100
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            side=1
            x,y=16,11
            id=Templar2
            type=Naga Myrmidon
            name= _ "Templar"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=2
                        attack_weight=0
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            blade=40
                            impact=40
                            fire=40
                            cold=60
                            arcane=40
                            pierce=40
                        [/resistance]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        [set_specials]
                            {WEAPON_SPECIAL_MAGICAL}
                            mode=append
                        [/set_specials]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            side=1
            x,y=6,16
            id=Templar3
            type=Naga Myrmidon
            name= _ "Templar"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=2
                        attack_weight=0
                    [/effect]
                    [effect]
                        apply_to=defense
                        replace=yes
                        [defense]
                            deep_water=20
                            shallow_water=20
                            swamp_water=20
                            flat=20
                            sand=20
                            forest=20
                            hills=20
                            mountains=20
                            village=20
                            castle=20
                            cave=20
                            frozen=20
                            unwalkable=20
                            impassable=20
                            fungus=20
                        [/defense]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        [set_specials]
                            {WEAPON_SPECIAL_BERSERK}
                            mode=append
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            cold=80
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            side=1
            x,y=26,16
            id=Templar4
            type=Naga Myrmidon
            name= _ "Templar"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=2
                        attack_weight=0
                    [/effect]
                    [effect]
                        apply_to=hitpoints
                        increase_total=300%
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        [set_specials]
                            {WEAPON_SPECIAL_SLOW}
                            mode=append
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            cold=80
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            side=1
            x,y=16,21
            id=Templar5
            type=Naga Myrmidon
            name= _ "Templar"
            {IS_HERO}
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_RESILIENT}
                [object]
                    silent=yes
                    [effect]
                        apply_to=new_attack
                        name=sword
                        icon=attacks/scimitar.png
                        type=blade
                        range=noretaliation
                        damage=50
                        number=2
                        attack_weight=0
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name=dread
                        icon=attacks/wail.png
                        type=cold
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                        [/specials]
                        range=ranged
                        damage=10
                        number=3
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        [set_specials]
                            {WEAPON_SPECIAL_DRAIN}
                            mode=append
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=yes
                        [resistance]
                            cold=80
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]

        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 11}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 6 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 26 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_NAGA_GUARDIAN "Naga Warrior" 16 21}
        {_SPAWN_NAGA_GUARDIAN "Naga Myrmidon" 16 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Myrmidon" 16 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Myrmidon" 16 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Myrmidon" 16 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Myrmidon" 16 16}
        {_SPAWN_NAGA_GUARDIAN "Naga Myrmidon" 16 16}

        [color_adjust]
            red,green,blue=0,0,0
        [/color_adjust]

        [message]
            id=High Templar
            message= _ "I am the High Templar of the temples of the nagas. You have destroyed our god's mortal body, but our god awaits resurrection. We shall sacrifice your blood upon our altars. With the blood of the four kings, our god shall return ten times more powerful than before."
        [/message]
        [terrain_mask]
            x,y=1,1
            mask="{~add-ons/Valley_of_the_Ancients/maps/Temples_Of_The_Nagas.mask}"
            #border=yes
        [/terrain_mask]
        [terrain]
            terrain=Xu
            x=9,23,9,23
            y=1,1,32,32
        [/terrain]
        [terrain]
            terrain=Mm^Xm
            x=8,9,10,22,23,24,8,9,10,22,23,24
            y=1,2,1,1,2,1,31,31,31,31,31,31
        [/terrain]
        [message]
            speaker=High Templar
            message= _ "I can not believe that you've made it this far, thieves, but you will go no further. I have called upon our god to flood our sacred lands, and now we will stop you. Now, you land dwellers have no chance against us."
        [/message]

        [event]
            name=last breath
            [filter]
                id=High Templar
            [/filter]
            [message]
                speaker=unit
                message= _ "We have still won... For our souls shall now be collected by our god. The day of our rebirth shall cast terror into your mortal world. Hahahaha...."
            [/message]
        [/event]
    [/event]

    # victory conditions and messages
    [event]
        name=time over
        [message]
            speaker=narrator
            message= _ "There is a constant pulsing in your head... though you wrestle with the inner demon, you cannot resist it any longer. Your army has stopped fighting, all now on their knees in worship. You, too, feel the urge to worship... You find yourself on your knees as well, offering your soul to the Naga God as his faithful servant for all of time."
            image="portraits/nagas/myrmidon.webp"
        [/message]
    [/event]

    [event]
        name=victory
        [message]
            speaker=narrator
            message= _ "The blood dripping from your blade splatters upon your boots like crimson drops of victory. The remaining templars, elderly and unfit for battle, mutter curses to you - invoking the power of their god to cast a hex upon you. Your smile broadens as your bloody blade hacks them down savagely, heads rolling and random body parts still twitching as they long to be reattached to their bodies.
Your voice is hoarse and dry, ""I am not here for your god, I am here for your gold."" It takes several days and dozens of wagons to haul away your mighty fortune. You have found enough gold to buy yourself a kingdom."
            image="portraits/nagas/myrmidon.webp"
        [/message]
    [/event]

    [event]
        name=die
        first_time_only=no

        [filter]
            side=1
        [/filter]

        [if]
            [not]
                [have_unit]
                    side=1
                [/have_unit]
            [/not]
            [and]
                [variable]
                    name=turn_number
                    greater_than=$last_spawn
                [/variable]
            [/and]
            [then]
                [endlevel]
                    result=victory
                [/endlevel]
            [/then]
        [/if]
    [/event]

    [event]
        name=die
        first_time_only=no
        [filter]
            canrecruit=yes
            side=2,3,4,5
        [/filter]
        [if]
            [not]
                [have_unit]
                    canrecruit=yes
                    side=2,3,4,5
                [/have_unit]
            [/not]
            [then]
                [message]
                    speaker=narrator
                    image=$unit.portrait
                    message= _ "The High Templar's laughter swims through your ears as you slowly die..."
                [/message]
                [message]
                    speaker=narrator
                    caption=_"High Templar"
                    message= _ "The blood of these kings shall be used to revive our god. It shall be ten times more poweful, we shall be unstoppable - and if you don't know who I am , try again and come to defeat me on hardcore difficulty!"
                    image="portraits/nagas/myrmidon.webp"
                [/message]
            [/then]
        [/if]
    [/event]
[/multiplayer]

#undef _HERO
#undef _QUAKE
#undef _SET_LABEL
#undef _SPAWN_DEFENDER
#undef _SPAWN_GUARDIAN
#undef _SPAWN_NAGA_GUARDIAN
